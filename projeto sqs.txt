github - não comitar chaves aws / qq info acesso


---
conhecer uso da api aws

explorar tratamento de erros

ver documentação / boas práticas

explorar métodos async


---
SQSQueueProducer
    endpoints
        /send post
            messageService.send
        
        /produce get
            listar msgs enviadas - messageService.get
            
            retornar 200 com conteudo de messageService.get

            
    messageService
        send(int messageAmount)
            loop messageAmount
                gerar timestamp + data e hora dd/mm/yyyy hh:nn:ss:ms + contador
             
                log payload a enviar
                
                guardar timestamp inicio envio
                
                sqsService.send({json do conteudo acima}, queueURL)
                
                guardar timestamp fim envio
                
                se falhar disparar exception e interromper
                
                gravar em tabela
                    id auto inc
                    timestamp inicio envio
                    timestamp fim envio
                    tempo envio (dif timestamps)
                    payload json
                    
            return nome da fila e status 200
        
        get
            query tabela bd
            calcular tempo médio, min e max de envio e qt de mensagens
            montar json com dados            

        
    sqsService
        send(message, queueURL)
            enviar msg
            enviar em lote com sondagem longa            
            retornar id da msg / status ok
            
            
---            
SQSQueueListener
    config projeto igual producer

        
    endpoints
        /start (inicia escuta da fila)
            messageService.listen(true)
            retorno 200 se ok
        
        /stop (para escuta da fila)
            messageService.listen(false)
            retorno 200 se ok
        
        /messages get (retornar mensagens recebidas)
            return messageService.get

        
    messageService
        listen(bool start)
            sqsService.listen(start)
        
        get
            query banco de dados
            retornar mensagens com detalhes

            
    sqsService
        metodo listen(bool start)
        
        criar listener
        ou remover listener
        instanciar classe ?
        
        criar listener async
        receber em lote com sondagem longa
        receber msg
        gravar em tabela
        gravar tb data e hora recebimento, id msg e o que mais for util
        
        
---
testes :

    testar comportamento fila
    
    testar parametros da fila - tempo de visibilidade, retenção etc
    
    simular multiplos consumidores
            
    usar cloudwatch p/ monitorar filas

    simular dlq
        encaminhar msg apos tempo / outros criterios
        
        recuperar msg de dlq

